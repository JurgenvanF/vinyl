<!doctype html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mijn Vinyl Collectie</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Firebase SDKs -->
    <script type="module">
      // Import the functions you need from the SDKs
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";

      import {
        getFirestore,
        collection,
        addDoc,
        deleteDoc,
        getDocs,
        doc,
        updateDoc,
      } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";

      // Your Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC5EJrxQ3evy6Yq3wjJha4Fkvgbl_U-z4g",
        authDomain: "vinyl-app-2c001.firebaseapp.com",
        databaseURL:
          "https://vinyl-app-2c001-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "vinyl-app-2c001",
        storageBucket: "vinyl-app-2c001.firebasestorage.app",
        messagingSenderId: "517868864549",
        appId: "1:517868864549:web:455759e2a12e9aeb692bcc",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const vinylCollection = collection(db, "vinyl");

      // Expose Firebase objects globally so app.js can use them
      window.firebaseApp = app;
      window.db = db;
      window.vinylCollection = vinylCollection;
      window.firebaseImports = { addDoc, deleteDoc, getDocs, doc, updateDoc };
      console.log("Firebase initialized successfully");
    </script>
  </head>
  <body>
    <h1>ðŸŽ¶ Mijn Vinyl Collectie</h1>

    <div class="top-bar">
      <input
        type="text"
        id="collectionSearch"
        placeholder="Zoek in je collectie..."
        oninput="filterCollection()"
      />
      <select
        class="filter-select"
        id="collectionFilter"
        onchange="filterCollection()"
      >
        <option value="artist">Artiest</option>
        <option value="album">Album</option>
        <option value="year">Jaar</option>
        <option value="recent">Recent toegevoegd</option>
      </select>
      <button class="add-btn" onclick="openModal()">+</button>
    </div>

    <div class="section">
      <div id="collection"></div>
      <p id="emptyMessage" class="muted hidden">
        Je collectie is leeg. Voeg wat vinyl toe! ðŸŽµ
      </p>
    </div>

    <!-- Voeg Vinyl Toe Modal -->
    <div
      id="modal"
      class="modal"
      onclick="if (event.target === this) closeModal();"
    >
      <div class="modal-content">
        <button class="close-btn" onclick="closeModal()">Sluiten</button>
        <h2>Voeg Vinyl Toe</h2>
        <input
          type="text"
          id="searchInput"
          placeholder="Zoek artiest, album of nummer"
          oninput="searchAlbums()"
        />
        <div id="results" class="grid"></div>
      </div>
    </div>

    <!-- Album Details Modal -->
    <div
      id="albumModal"
      class="modal"
      onclick="if (event.target === this) closeAlbumModal();"
    >
      <div class="modal-content album-details">
        <button class="close-btn" onclick="closeAlbumModal()">Sluiten</button>
        <div id="albumInfo"></div>
        <div class="tracklist" id="albumTracks"></div>
      </div>
    </div>

    <!-- Your App Script -->
    <script type="module" src="app.js"></script>
  </body>
</html>
